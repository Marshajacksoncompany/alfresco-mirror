<component>
    <name>alfrescosolr</name>
    <canBeEdited>0</canBeEdited>
    <selected>1</selected>
    <show>0</show>
    <folderList>
	<folder>
	    <name>solr</name>
	    <destination>${alfresco_data_directory}/solr</destination>
	    <distributionFileList>
                <distributionFile origin="${alfresco_solr_source_directory}/*" allowWildcards="1" />
	    </distributionFileList>
	    <actionList>
	        <createDirectory path="${tomcat_server_directory}/conf/Catalina" />
		<createDirectory path="${tomcat_server_directory}/conf/Catalina/localhost" />	    
		<copyFile>
                    <origin>${alfresco_data_directory}/solr/solr-tomcat-context.xml</origin>
                    <destination>${tomcat_server_directory}/conf/Catalina/localhost/solr.xml</destination>
	        </copyFile>
	    </actionList>
	</folder>
    </folderList>
    <postInstallationActionList>
        <alfrescoConfigure alfrescoFiles="${alfresco_data_directory}/solr/archive-SpacesStore/conf/solrcore.properties;${alfresco_data_directory}/solr/workspace-SpacesStore/conf/solrcore.properties;${tomcat_server_directory}/conf/Catalina/localhost/solr.xml" />
	<substitute>
	    <files>${alfresco_data_directory}/solr/archive-SpacesStore/conf/solrcore.properties;${alfresco_data_directory}/solr/workspace-SpacesStore/conf/solrcore.properties</files>
	    <type>exact</type>
	    <substitutionList>
	        <substitution>
		    <pattern>localhost:8080</pattern>
		    <value>localhost:${application_server_port}</value>
		</substitution>
	    </substitutionList>
	</substitute>		
    </postInstallationActionList>
</component>
