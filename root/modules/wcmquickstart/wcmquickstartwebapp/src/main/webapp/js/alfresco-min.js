var YUIDom=YAHOO.util.Dom,YUIEvent=YAHOO.util.Event,YUISelector=YAHOO.util.Selector;if(typeof Alfresco=="undefined"||!Alfresco){var Alfresco={}}Alfresco.constants=Alfresco.constants||{};Alfresco.template=Alfresco.template||{};Alfresco.component=Alfresco.component||{};Alfresco.dashlet=Alfresco.dashlet||{};Alfresco.module=Alfresco.module||{};Alfresco.util=Alfresco.util||{};Alfresco.logger=Alfresco.logger||{};Alfresco.service=Alfresco.service||{};Alfresco.thirdparty=Alfresco.thirdparty||{};Alfresco.widget=Alfresco.widget||{};Alfresco.admin=Alfresco.admin||{};Alfresco.doclib=Alfresco.doclib||{MODE_SITE:0,MODE_REPOSITORY:1};Alfresco.messages=Alfresco.messages||{global:null,scope:{}};Alfresco.util.appendArrayToObject=function(e,a,f){var d=(f!==undefined?f:true);if(YAHOO.lang.isObjecT(e)&&YAHOO.lang.isArray(a)){for(var b=0,c=a.length;b<c;b++){if(a[b]!==undefined){e[a[b]]=d}}}return e};Alfresco.util.arrayToObject=function(a,f){var e={},d=(f!==undefined?f:true);if(YAHOO.lang.isArray(a)){for(var b=0,c=a.length;b<c;b++){if(a[b]!==undefined){e[a[b]]=d}}}return e};Alfresco.util.deepCopy=function(g,h){if(!g){return g}if(!h){h={}}if(YAHOO.lang.isArray(g)){var f=[];for(var e=0,j=g.length,c;e<j;e++){c=g[e];if(!YAHOO.lang.isFunction(c)||h.copyFunctions==true){f.push(Alfresco.util.deepCopy(c,h))}}return f}if(Alfresco.util.isDate(g)){return new Date(g.getTime())}if(YAHOO.lang.isString(g)||YAHOO.lang.isNumber(g)||YAHOO.lang.isBoolean(g)){return g}if(YAHOO.lang.isObject(g)){if(g.toString()=="[object Object]"){var d={},b;for(var a in g){if(g.hasOwnProperty(a)){b=g[a];if(!YAHOO.lang.isFunction(b)||h.copyFunctions==true){d[a]=Alfresco.util.deepCopy(b,h)}}}return d}else{return g}}return null};Alfresco.util.isDate=function(a){return a.constructor&&a.constructor.toString().indexOf("Date")!=-1};Alfresco.util.objectMatchesPattern=function(c,b){for(var a in b){if(b.hasOwnProperty(a)&&(!b.hasOwnProperty(a)||(c[a]!=b[a]&&b[a]!="*"))){return false}}return true};Alfresco.util.dotNotationToObject=function(h,f){var a={},g=a;if(typeof h==="string"){var c=h.split("."),e,b,d;for(b=0,d=c.length-1;b<d;b++){e=c[b];g[e]={};g=g[e]}g[c[b]]=f!==undefined?f:null}return a};Alfresco.util.findValueByDotNotation=function(g,f,a){var e=a?a:null;if(f&&g){var d=g;var c=f.split(".");for(var b=0;b<c.length;b++){d=d[c[b]];if(typeof d=="undefined"){return e}}return d}return e};Alfresco.util.arrayContains=function(a,b){return Alfresco.util.arrayIndex(a,b)!==-1};Alfresco.util.arrayRemove=function(a,c){var b=Alfresco.util.arrayIndex(a,c);while(b!==-1){a.splice(b,1);b=Alfresco.util.arrayIndex(a,c)}return a};Alfresco.util.arrayIndex=function(a,d){if(a){for(var b=0,c=a.length;b<c;b++){if(a[b]==d){return b}}}return -1};Alfresco.util.assertNotEmpty=function(b,a){if(typeof b=="undefined"||!b||b===""){throw new Error(a)}};Alfresco.util.combinePaths=function(){var c="",a,b;for(a=0,b=arguments.length;a<b;a++){if(arguments[a]!==null){c+=arguments[a]+(arguments[a]!=="/"?"/":"")}}return c.substring(0,c.length-1).replace(/(^|[^:])\/{2,}/g,"$1/").replace(/(.)\/$/g,"$1")};Alfresco.util.BYTES_KB=1024;Alfresco.util.BYTES_MB=1048576;Alfresco.util.BYTES_GB=1073741824;Alfresco.util.formatFileSize=function(a){if(typeof a=="string"){a=parseInt(a,10)}if(a<Alfresco.util.BYTES_KB){return a+" "+Alfresco.util.message("size.bytes")}else{if(a<Alfresco.util.BYTES_MB){a=Math.round(a/Alfresco.util.BYTES_KB);return a+" "+Alfresco.util.message("size.kilobytes")}else{if(a<Alfresco.util.BYTES_GB){a=Math.round(a/Alfresco.util.BYTES_MB);return a+" "+Alfresco.util.message("size.megabytes")}}}a=Math.round(a/Alfresco.util.BYTES_GB);return a+" "+Alfresco.util.message("size.gigabytes")};Alfresco.util.getFileIcon=function(c,a,g){var h={doc:"doc",docx:"doc",ppt:"ppt",pptx:"ppt",xls:"xls",xlsx:"xls",pdf:"pdf",bmp:"img",gif:"img",jpg:"img",jpeg:"img",png:"img",txt:"text"};var b="generic",i=typeof a==="string"?a:"cm:content",e=typeof g==="number"?g:32;var f=Alfresco.util.getFileIcon.types[i];if(f==="file"){var d=c.substring(c.lastIndexOf(".")+1).toLowerCase();if(d in h){b=h[d]}}else{if(typeof f=="undefined"){f="file"}}return b+"-"+f+"-"+e+".png"};Alfresco.util.getFileIcon.types={"{http://www.alfresco.org/model/content/1.0}cmobject":"file","cm:cmobject":"file","{http://www.alfresco.org/model/content/1.0}content":"file","cm:content":"file","{http://www.alfresco.org/model/content/1.0}thumbnail":"file","cm:thumbnail":"file","{http://www.alfresco.org/model/content/1.0}folder":"folder","cm:folder":"folder","{http://www.alfresco.org/model/content/1.0}category":"category","cm:category":"category","{http://www.alfresco.org/model/content/1.0}person":"user","cm:person":"user","{http://www.alfresco.org/model/content/1.0}authorityContainer":"group","cm:authorityContainer":"group",tag:"tag","{http://www.alfresco.org/model/site/1.0}sites":"site","st:sites":"site","{http://www.alfresco.org/model/site/1.0}site":"site","st:site":"site"};Alfresco.util.formatDate=function(a){try{return Alfresco.thirdparty.dateFormat.apply(this,arguments)}catch(b){return a}};Alfresco.util.fromISO8601=function(a){try{return Alfresco.thirdparty.fromISO8601.apply(this,arguments)}catch(b){return null}};Alfresco.util.toISO8601=function(a){try{return Alfresco.thirdparty.toISO8601.apply(this,arguments)}catch(b){return""}};Alfresco.util.fromExplodedJSONDate=function(b){try{var a=YAHOO.lang.substitute("{year 4}-{month 2}-{date 2}T{hours 2}:{minutes 2}:{seconds 2}.{milliseconds 3}Z",b,function(f,g,e){if(f=="month"){++g}g=String(g);var d=parseInt(e,10)||2;while(g.length<d){g="0"+g}return g});return Alfresco.thirdparty.fromISO8601.apply(this,[a,Array.prototype.slice.call(arguments).slice(1)])}catch(c){return null}};Alfresco.util.toExplodedJSONDate=function(a){return({zone:"UTC",year:a.getFullYear(),month:a.getMonth(),date:a.getDate(),hours:a.getHours(),minutes:a.getMinutes(),seconds:a.getSeconds(),milliseconds:a.getMilliseconds()})};Alfresco.util.pad=function(b,a){b=String(b);a=parseInt(a,10)||2;while(b.length<a){b="0"+b}return b};Alfresco.util.insertAtCursor=function(d,a){if(document.selection){d.focus();var e=document.selection.createRange();e.text=a}else{if(d.selectionStart||d.selectionStart=="0"){var c=d.selectionStart;var b=d.selectionEnd;d.value=d.value.substring(0,c)+a+d.value.substring(b,d.value.length)}else{d.value+=a}}d.focus()};Alfresco.util.decodeHTML=function(a){if(a===null){return""}return a.split("&lt;").join("<").split("&gt;").join(">").split("&amp;").join("&").split("&quot;").join('"')};Alfresco.util.encodeHTML=function(d,b){if(d===null||typeof d=="undefined"){return""}var a=b===true?"":"&nbsp;&nbsp;&nbsp;";if(YAHOO.env.ua.ie>0){d=""+d;return d.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br />"+a)}var c=arguments.callee;c.text.data=d;return c.div.innerHTML.replace(/\n/g,"<br />"+a).replace('"',"&quot;")};Alfresco.util.encodeHTML.div=document.createElement("div");Alfresco.util.encodeHTML.text=document.createTextNode("");Alfresco.util.encodeHTML.div.appendChild(Alfresco.util.encodeHTML.text);Alfresco.util.encodeURIPath=function(a){return encodeURI(a).replace(/#/g,"%23").replace(/&/g,"%26").replace(/\=/g,"%3D")};Alfresco.util.activateLinks=function(b){var a=new RegExp(/((http|ftp|https):\/\/[\w\-_]+(\.[\w\-_]+)+([\w\-\.,@?\^=%&:\/~\+#]*[\w\-\@?\^=%&\/~\+#])?)/g);b=b.replace(a,'<a href="$1" target="_blank">$1</a>');return b};Alfresco.util.tweetToHTML=function(b){b=Alfresco.util.activateLinks(b);var a=new RegExp(/(^|[^\w])@([\w]{1,})/g);b=b.replace(a,'$1<a href="http://twitter.com/$2">@$2</a>');a=new RegExp(/#+([\w]{1,})/g);b=b.replace(a,'<a href="http://search.twitter.com/search?q=%23$1">#$1</a>');return b};Alfresco.util.setSelectedIndex=function(d,c){for(var b=0,a=d.options.length;b<a;b++){if(d.options[b].value==c){d.selectedIndex=b;return d.options[b].text}}return null};Alfresco.util.setSelectedClass=function(e,g,d){var c=e.childNodes,f=null;d=d?d:"selected";for(var b=0,a=c.length;b<a;b++){f=c[b];if(!g||f.tagName==g.tagName){YUIDom.removeClass(f,d);if(f===g){YUIDom.addClass(f,d)}}}};Alfresco.util.generateDomId=function(b,a){var d,c=a||"alf-id";do{d=c+Alfresco.util.generateDomId._nId++}while(YUIDom.get(d)!==null);Alfresco.util.setDomId(b,d);return d};Alfresco.util.generateDomId._nId=0;Alfresco.util.setDomId=function(b,a){if(b){if(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8){b.attributes.id.value=a;b.setAttribute("id",a)}else{b.setAttribute("id",a)}}};Alfresco.util.relToTarget=function(d){var c=YUISelector.query("a[rel]",d);for(var a=0,b=c.length;a<b;a++){c[a].setAttribute("target",c[a].getAttribute("rel"))}};Alfresco.util.populateHTML=function(){for(var a=0,c=arguments.length,b=null;a<c;a++){b=YUIDom.get(arguments[a][0]);if(b){b.innerHTML=arguments[a][1]}}};Alfresco.util.createYUIButton=function(g,b,a,h,e){var f={type:"button",disabled:false};if(typeof h=="object"){f=YAHOO.lang.merge(f,h)}if((f.type=="menu")&&(typeof f.menu=="string")){f.menu=g.id+"-"+f.menu}var d=e?e:g.id+"-"+b,c=null;if(YUIDom.get(d)!==null){c=new YAHOO.widget.Button(d,f);if(typeof c=="object"){if(typeof a=="function"){if(f.type=="menu"){c.getMenu().subscribe("click",a,g,true)}else{c.on("click",a,c,g)}}if(typeof f.htmlName!="undefined"){c.get("element").getElementsByTagName("button")[0].name=f.htmlName}}}return c};Alfresco.util.disableYUIButton=function(a){if(a.set&&a.get){a.set("disabled",true);if(a.get("type")=="link"){a.set("href","");if(a._button&&a._button.setAttribute){a._button.setAttribute("onclick","return false;")}a.addStateCSSClasses("disabled");a.removeStateCSSClasses("hover");a.removeStateCSSClasses("active");a.removeStateCSSClasses("focus")}}};Alfresco.util.createTwister=function(f,c,h){var b={panel:null,collapsed:null,CLASS_BASE:"alfresco-twister",CLASS_OPEN:"alfresco-twister-open",CLASS_CLOSED:"alfresco-twister-closed"};var d,a,e=YAHOO.lang.merge(b,h||{});d=YUIDom.get(f);if(d===null){return false}if(e.panel&&YUIDom.get(e.panel)){a=YUIDom.get(e.panel)}else{a=d.nextSibling;while(a.nodeType!==1&&a!==null){a=a.nextSibling}}if(a===null){return false}if(e.collapsed===null){var g=Alfresco.util.arrayToObject(Alfresco.util.createTwister.collapsed.split(","));e.collapsed=!!g[c]}YUIDom.addClass(d,e.CLASS_BASE);YUIDom.addClass(d,e.collapsed?e.CLASS_CLOSED:e.CLASS_OPEN);YUIDom.setStyle(a,"display",e.collapsed?"none":"block");YUIEvent.addListener(d,"click",function(l,m){var k=YUIDom.hasClass(m.controller,e.CLASS_OPEN);if(k){YUIDom.replaceClass(m.controller,e.CLASS_OPEN,e.CLASS_CLOSED)}else{YUIDom.replaceClass(m.controller,e.CLASS_CLOSED,e.CLASS_OPEN)}YUIDom.setStyle(m.panel,"display",k?"none":"block");var j=k?"add":"remove",i=new Alfresco.service.Preferences();i[j].call(i,Alfresco.service.Preferences.COLLAPSED_TWISTERS,m.filterName)},{controller:d,panel:a,filterName:c})};Alfresco.util.createTwister.collapsed="";Alfresco.util.createYUIPanel=function(d,c,b){var a,f={modal:true,constraintoviewport:true,draggable:true,fixedcenter:"contained",close:true,visible:false},e={render:true,type:YAHOO.widget.Panel};if(typeof c=="object"){f=YAHOO.lang.merge(f,c)}if(typeof b=="object"){e=YAHOO.lang.merge(e,b)}a=new (e.type)(d,f);if(e.render){a.render(document.body)}a.subscribe("show",function(h,g){YAHOO.Bubbling.fire("showPanel",{panel:this})});a.subscribe("hide",function(h,g){YAHOO.Bubbling.fire("hidePanel",{panel:this})});return a};Alfresco.util.findEventClass=function(c,a){var d=c.element;var b=(a||"span").toLowerCase();while((d!==null)&&((d.tagName.toLowerCase()!=b)||(d.className.indexOf("yui")===0))){d=d.firstChild}if(d===null){return null}return d.className};Alfresco.util.hasEventInterest=function(d,a){var f=a[1],c="source",e="target",b=false;if(f){if(f.action==="navigate"){f.eventGroup=f.anchor.rel}if(f.eventGroup&&d){c=(typeof f.eventGroup=="string")?f.eventGroup:f.eventGroup.eventGroup;e=(typeof d=="string")?d:d.eventGroup;b=(c==e)}}return b};Alfresco.util.hasRequiredFlashPlayer=function(c,b,a){if(typeof DetectFlashVer=="function"){return DetectFlashVer(c,b,a)}return false};Alfresco.util.addMessages=function(b,a){if(a===undefined){throw new Error("messageScope must be defined")}else{if(a=="global"){throw new Error("messageScope cannot be 'global'")}else{Alfresco.messages.scope[a]=YAHOO.lang.merge(Alfresco.messages.scope[a]||{},b);return true}}return false};Alfresco.util.copyMessages=function(b,a){if(b===undefined){throw new Error("Source must be defined")}else{if(Alfresco.messages.scope[b]===undefined){throw new Error("Source namespace doesn't exist")}else{if(a===undefined){throw new Error("Destination must be defined")}else{if(a=="global"){throw new Error("Destination cannot be 'global'")}else{Alfresco.messages.scope[a]=YAHOO.lang.merge({},Alfresco.messages.scope[b])}}}}};Alfresco.util.message=function(a,b){var f=a;if(typeof a!="string"){throw new Error("Missing or invalid argument: messageId")}var d=Alfresco.messages.global[a];if(typeof d=="string"){f=d}if((typeof b=="string")&&(typeof Alfresco.messages.scope[b]=="object")){var c=Alfresco.messages.scope[b][a];if(typeof c=="string"){f=c}}var e;if((arguments.length==3)&&(typeof arguments[2]=="object")){e=arguments[2]}else{e=Array.prototype.slice.call(arguments).slice(2)}f=YAHOO.lang.substitute(f,e);return f};Alfresco.util.caretFix=function(c){if(YAHOO.env.ua.gecko===1.8){if(typeof c=="string"){c=YUIDom.get(c)}var b=YUISelector.query(".yui-u",c);for(var a=0;a<b.length;a++){var d=b[a];YUIDom.addClass(d,"caret-fix")}}};Alfresco.util.undoCaretFix=function(c){if(YAHOO.env.ua.gecko===1.8){if(typeof c=="string"){c=YUIDom.get(c)}var b=YUISelector.query(".caret-fix",c);for(var a=0;a<b.length;a++){var d=b[a];YUIDom.removeClass(d,"caret-fix")}}};Alfresco.util.parseJSON=function(b,a){try{return YAHOO.lang.JSON.parse(b)}catch(c){if(a){Alfresco.util.PopupManager.displayPrompt({title:"Failure",text:"Can't parse response as json: '"+b+"'"})}}return null};Alfresco.util.uriTemplate=function(a,d,e){if(!a in Alfresco.constants.URI_TEMPLATES){return null}var c="",b=Alfresco.constants.URI_TEMPLATES[a];if(b.charAt(0)=="/"){b=b.substring(1)}if(e){c=location.protocol+"//"+location.host}c+=Alfresco.constants.URL_PAGECONTEXT+YAHOO.lang.substitute(b,d);return c};Alfresco.util.contentURL=function(c,b,a){return Alfresco.constants.PROXY_URI+"api/node/content/"+c.replace(":/","")+"/"+b+(a?"?a=true":"")};Alfresco.util.getQueryStringParameter=function(b,a){var c=this.getQueryStringParameters(a);if(b in c){return c[b]}return null};Alfresco.util.getQueryStringParameters=function(b){var e,g,k,a,d,h,c,j,f;b=b||window.location.href;k=b.indexOf("?");a=k>=0?b.substr(k+1):b;k=a.lastIndexOf("#");a=k>=0?a.substr(0,k):a;d=a.split("&");f={};for(e=0,g=d.length;e<g;e++){h=d[e].split("=");if(h.length>=2){c=h[0];j=window.unescape(h[1]);switch(typeof f[c]){case"undefined":f[c]=j;break;case"string":f[c]=[f[c]].concat(j);break;case"object":f[c]=f[c].concat(j);break}}}return f};Alfresco.util.toQueryString=function(c){var a="?",b,d,e;for(b in c){if(c.hasOwnProperty(b)){d=c[b];if(typeof d=="object"){for(e in d){if(d.hasOwnProperty(e)){a+=b+"="+window.escape(d[e])+"&"}}}else{if(typeof d=="string"){a+=b+"="+window.escape(d)+"&"}}}}return a.substring(0,a.length-1)};Alfresco.util.getVar=function(b,a){var d=typeof a!="undefined"?a:null;try{if(window.name!==""&&YAHOO.lang.JSON.isValid(window.name)){var g=YAHOO.lang.JSON.parse(window.name),c=g[location.host],f=null;if(typeof c=="object"){f=c[b];if(typeof f!=="undefined"&&f!==null){d=f}}}}catch(h){Alfresco.logger.error("Alfresco.util.getVar()",b,a,h)}return d};Alfresco.util.setVar=function(a,f){var d=true;try{var b={};if(window.name!==""&&YAHOO.lang.JSON.isValid(window.name)){b=YAHOO.lang.JSON.parse(window.name)}if(typeof b[location.host]=="undefined"){b[location.host]={}}b[location.host][a]=f;window.name=YAHOO.lang.JSON.stringify(b)}catch(c){Alfresco.logger.error("Alfresco.util.setVar()",a,f,c);d=false}return d};Alfresco.util.getTags=function(f){var c=null,b=[],e={},d=new RegExp(/([^"\^\s]+)\s*|"([\^"]+)"\s*/g),a;while(c=d.exec(f)){a=c[1]||c[2];if(e[a]===undefined){e[a]=true;b.push(a)}}return b};Alfresco.util.cleanBubblingObject=function(b){var d={action:true,flagged:true,decrepitate:true,stop:true},c={};for(var a in b){if(b.hasOwnProperty(a)&&d[a]!==true){c[a]=b[a]}}return c};Alfresco.util.bind=function(c,b){if(!YAHOO.lang.isObject(b)){return c}var a=Array.prototype.slice.call(arguments).slice(2);return(function(){return c.apply(b,a.concat(Array.prototype.slice.call(arguments)))})};Alfresco.util.YUILoaderHelper=function(){var e=null;var f=[];var d=false;return({require:function c(j,g,l){if(e===null){e=new YAHOO.util.YUILoader({base:Alfresco.constants.URL_CONTEXT+"yui/",filter:Alfresco.constants.DEBUG?"DEBUG":"",loadOptional:false,skin:{},onSuccess:Alfresco.util.YUILoaderHelper.onLoaderComplete,onFailure:function(i){alert("load failed:"+i)},scope:this});e.addModule({name:"swfplayer",type:"js",path:"swfplayer/swfplayer.js",varName:"SWFPlayer",requires:["uploader"]});e.addModule({name:"columnbrowser",type:"js",path:"columnbrowser/columnbrowser.js",varName:"ColumnBrowser",requires:["json","carousel"],skinnable:true})}if(j.length>0){var k=true;for(var h=0;h<j.length;h++){if(YAHOO.env.getVersion(j[h])===null){k=false;break}}if(k&&(g!==null)){YAHOO.lang.later(10,l,g)}else{e.require(j);f.push({required:Alfresco.util.arrayToObject(j),fn:g,scope:(typeof l!="undefined"?l:window)})}}else{if(g!==null){g.call(typeof l!="undefined"?l:window)}}},loadComponents:function a(){if(e!==null){e.insert(null,"js")}},onLoaderComplete:function b(){for(var g=0;g<f.length;g++){if(f[g].fn){f[g].fn.call(f[g].scope)}}f=[];d=true}})}();Alfresco.util.ComponentManager=function(){var e=[];return({register:function d(h){e.push(h);e[h.id]=h},unregister:function g(h){for(var j=0;j<e.length;j++){if(e[j]==h){e.splice(j,1);delete e[h.id];break}}},reregister:function c(h){this.unregister(h);this.register(h)},find:function f(p){var o=[];var h,l;for(var n=0,k=e.length;n<k;n++){l=e[n];h=true;for(var m in p){if(p[m]!=l[m]){h=false}}if(h){o.push(l)}}return o},findFirst:function b(h){var i=Alfresco.util.ComponentManager.find({name:h});return(typeof i[0]=="object"?i[0]:null)},get:function a(h){return(e[h]||null)}})}();Alfresco.util.PopupManager=function(){var a=Alfresco.util.encodeHTML;return({zIndex:15,defaultDisplayMessageConfig:{title:null,text:null,spanClass:"message",displayTime:2.5,effect:YAHOO.widget.ContainerEffect.FADE,effectDuration:0.5,visible:false,noEscape:false},displayMessage:function(b,e){var e=e||document.body;var h=YAHOO.lang.merge(this.defaultDisplayMessageConfig,b);if(h.text===undefined){throw new Error("Property text in userConfig must be set")}var d={modal:false,visible:h.visible,close:false,draggable:false,effect:{effect:h.effect,duration:h.effectDuration},zIndex:this.zIndex++};if(h.effect===null||YAHOO.env.ua.ie>0){delete d.effect}var f=new YAHOO.widget.Dialog("message",d);var g="<span class='"+h.spanClass+"'>"+(h.noEscape?h.text:a(h.text))+"</span>";f.setBody(g);f.render(e);f.center();if(h.displayTime>0){f.subscribe("show",this._delayPopupHide,{popup:f,displayTime:(h.displayTime*1000)},true)}f.show();return f},_delayPopupHide:function(){YAHOO.lang.later(this.displayTime,this,function(){this.popup.destroy()})},defaultDisplayPromptConfig:{title:null,text:null,icon:null,close:false,constraintoviewport:true,draggable:true,effect:null,effectDuration:0.5,modal:true,visible:false,noEscape:false,buttons:[{text:null,handler:function(){this.destroy()},isDefault:true}]},displayPrompt:function(d,e){var e=e||document.body;if(this.defaultDisplayPromptConfig.buttons[0].text===null){this.defaultDisplayPromptConfig.buttons[0].text=Alfresco.util.message("button.ok",this.name)}var f=YAHOO.lang.merge(this.defaultDisplayPromptConfig,d);if(f.text===undefined){throw new Error("Property text in userConfig must be set")}var b=new YAHOO.widget.SimpleDialog("prompt",{close:f.close,constraintoviewport:f.constraintoviewport,draggable:f.draggable,effect:f.effect,modal:f.modal,visible:f.visible,zIndex:this.zIndex++});if(f.title){b.setHeader(a(f.title))}b.setBody(f.noEscape?f.text:a(f.text));if(f.icon){b.cfg.setProperty("icon",f.icon)}if(f.buttons){b.cfg.queueProperty("buttons",f.buttons)}b.render(e);b.center();b.show()},defaultGetUserInputConfig:{title:null,text:null,value:"",icon:null,close:true,constraintoviewport:true,draggable:true,effect:null,effectDuration:0.5,modal:true,visible:false,initialShow:true,noEscape:true,html:null,callback:null,buttons:[{text:null,handler:null,isDefault:true},{text:null,handler:function(){this.destroy()}}]},getUserInput:function(e){if(this.defaultGetUserInputConfig.buttons[0].text===null){this.defaultGetUserInputConfig.buttons[0].text=Alfresco.util.message("button.ok",this.name)}if(this.defaultGetUserInputConfig.buttons[1].text===null){this.defaultGetUserInputConfig.buttons[1].text=Alfresco.util.message("button.cancel",this.name)}var h=YAHOO.lang.merge(this.defaultGetUserInputConfig,e);var b=new YAHOO.widget.SimpleDialog("userInput",{close:h.close,constraintoviewport:h.constraintoviewport,draggable:h.draggable,effect:h.effect,modal:h.modal,visible:h.visible,zIndex:this.zIndex++});if(h.title){b.setHeader(a(h.title))}var f=h.html,g=Alfresco.util.generateDomId();if(f===null){f="";if(h.text){f+='<label for="'+g+'">'+(h.noEscape?h.text:a(h.text))+"</label>"}f+='<textarea id="'+g+'" tabindex="0">'+h.value+"</textarea>"}b.setBody(f);if(h.icon){b.cfg.setProperty("icon",h.icon)}if(h.buttons){if(h.okButtonText){h.buttons[0].text=h.okButtonText}if(typeof e.buttons=="undefined"||typeof e.buttons[0]=="undefined"){h.buttons[0].handler={fn:function(c,j){var i=null;if(YUIDom.get(j.id)){i=YUIDom.get(j.id).value}this.destroy();if(j.callback.fn){j.callback.fn.call(j.callback.scope||window,i,j.callback.obj)}},obj:{id:g,callback:h.callback}}}b.cfg.queueProperty("buttons",h.buttons)}b.render(document.body);b.center();if(h.initialShow){b.show()}if(h.value!==""){YUIDom.get(g).selectionStart=0;YUIDom.get(g).selectionEnd=h.value.length}var d=new YAHOO.util.KeyListener(document,{keys:YAHOO.util.KeyListener.KEY.ESCAPE},{fn:function(i,c){this.destroy()},scope:b,correctScope:true});d.enable();if(YUIDom.get(g)){YUIDom.get(g).focus()}return b}})}();Alfresco.util.FilterManager=function(){var b=[];return({register:function a(e,h){var f,g,d;if(typeof h=="string"){h=[h]}for(f=0,g=h.length;f<g;f++){d=h[f];b.push({filterOwner:e,filterId:d});b[d]=e}},getOwner:function c(d){return(b[d]||null)}})}();Alfresco.util.Ajax=function(){return{JSON:"application/json",GET:"GET",POST:"POST",PUT:"PUT",DELETE:"DELETE",defaultRequestConfig:{method:"GET",url:null,dataObj:null,dataStr:null,dataForm:null,requestContentType:null,responseContentType:null,successCallback:null,successMessage:null,failureCallback:null,failureMessage:null,execScripts:false,noReloadOnAuthFailure:false,object:null},request:function(b){var e=YAHOO.lang.merge(this.defaultRequestConfig,b);Alfresco.util.assertNotEmpty(e.url,"Parameter 'url' can NOT be null");Alfresco.util.assertNotEmpty(e.method,"Parameter 'method' can NOT be null");if(e.requestContentType){YAHOO.util.Connect.setDefaultPostHeader(e.requestContentType);YAHOO.util.Connect.initHeader("Content-Type",e.requestContentType)}if(e.requestContentType===this.JSON){if(e.method.toUpperCase()===this.GET){if(e.dataObj){throw new Error("Parameter 'method' can not be 'GET' when trying to submit data in dataObj with contentType '"+e.requestContentType+"'")}}else{e.dataStr=YAHOO.lang.JSON.stringify(e.dataObj||{})}}else{if(e.dataObj){if(e.method.toUpperCase()===this.GET){e.url+=(e.url.indexOf("?")==-1?"?":"&")+this.jsonToParamString(e.dataObj,true)}else{e.dataStr=this.jsonToParamString(e.dataObj,true)}}}if(e.dataForm!==null){YAHOO.util.Connect.setForm(e.dataForm)}var d={success:this._successHandler,failure:this._failureHandler,scope:this,argument:{config:b}};if(YAHOO.env.ua.air!==0){if(e.method.toUpperCase()=="PUT"||e.method.toUpperCase()=="DELETE"){var a=Alfresco.util.getQueryStringParameter("alf_method",e.url);if(a===null){e.url+=(e.url.indexOf("?")==-1?"?":"&")+"alf_method="+e.method;e.method=this.POST}}}YAHOO.util.Connect.asyncRequest(e.method,e.url,d,e.dataStr)},jsonRequest:function(a){a.requestContentType=this.JSON;a.responseContentType=this.JSON;this.request(a)},jsonGet:function(a){a.method=this.GET;this.jsonRequest(a)},jsonPost:function(a){a.method=this.POST;this.jsonRequest(a)},jsonPut:function(a){a.method=this.PUT;this.jsonRequest(a)},jsonDelete:function(a){a.method=this.DELETE;this.jsonRequest(a)},jsonToParamString:function(c,b){var e="",d=true,a;for(a in c){if(c.hasOwnProperty(a)){if(d){d=false}else{e+="&"}if(b){e+=encodeURIComponent(a)+"="+encodeURIComponent(c[a])}else{e+=a+"="+c[a]}}}return e},_successHandler:function(e){var c=e.argument.config;if(c.execScripts){var a=[];var b=null;var d=/<script[^>]*>([\s\S]*?)<\/script>/gi;while((b=d.exec(e.responseText))){a.push(b[1])}a=a.join("\n");e.responseText=e.responseText.replace(d,"");window.setTimeout(a,0);YAHOO.lang.later(0,this,this._successHandlerPostExec,e)}else{this._successHandlerPostExec(e)}},_successHandlerPostExec:function(e){var a=e.argument.config;var d=a.successCallback;if(d&&typeof d.fn=="function"){var c=e.getResponseHeader["Content-Type"]||a.responseContentType;var b=null;if(/^\s*application\/json/.test(c)){b=Alfresco.util.parseJSON(e.responseText)}d.fn.call((typeof d.scope=="object"?d.scope:this),{config:a,json:b,serverResponse:e},d.obj)}if(a.successMessage){Alfresco.util.PopupManager.displayMessage({text:a.successMessage})}},_failureHandler:function(e){var b=e.argument.config;if(e.status==401&&!b.noReloadOnAuthFailure){window.location.reload(true);return}var d=b.failureCallback,c=null;if((d&&typeof d.fn=="function")||(b.failureMessage)){if(d&&typeof d.fn=="function"){var a=true;if(b.failureMessage||b.failureCallback){a=false}if(b.responseContentType==="application/json"){c=Alfresco.util.parseJSON(e.responseText,a)}d.fn.call((typeof d.scope=="object"?d.scope:this),{config:b,json:c,serverResponse:e},d.obj)}if(b.failureMessage){Alfresco.util.PopupManager.displayPrompt({title:Alfresco.util.message("message.failure",this.name),text:b.failureMessage})}}else{if(b.responseContentType=="application/json"){c=Alfresco.util.parseJSON(e.responseText);Alfresco.util.PopupManager.displayPrompt({title:c.status.name,text:c.message})}else{if(e.statusText){Alfresco.util.PopupManager.displayPrompt({title:Alfresco.util.message("message.failure",this.name),text:e.statusText})}else{Alfresco.util.PopupManager.displayPrompt({title:Alfresco.util.message("message.failure",this.name),text:"Error sending data to server."})}}}}}}();Alfresco.util.Cursor=function(){return({DRAGGABLE:"dnd-draggable",DRAG:"dnd-drag",DROP_VALID:"dnd-dropValid",DROP_INVALID:"dnd-dropInvalid",setCursorState:function(e,b){var a=[this.DRAGGABLE,this.DRAG,this.DROP_VALID,this.DROP_INVALID];for(var c=0;c<a.length;c++){var d=a[c];if(d===b){YUIDom.addClass(e,b)}else{YUIDom.removeClass(e,d)}}}})}();Alfresco.util.Anim=function(){return({fadeAttributes:{adjustDisplay:true,callback:null,scope:this},fadeIn:function b(f,e){return this._fade(f,true,e)},fadeOut:function a(f,e){return this._fade(f,false,e)},_fade:function d(g,j,i){g=YUIDom.get(g);i=YAHOO.lang.merge(this.fadeAttributes,i?i:{});var e=i.adjustDisplay;var k=YAHOO.env.ua.ie===0;if(k){YUIDom.setStyle(g,"opacity",j?0:1)}if(k){YUIDom.setStyle(g,"visibility","visible")}else{YUIDom.setStyle(g,"visibility",j?"visible":"hidden")}if(e&&YUIDom.getStyle(g,"display")==="none"){YUIDom.setStyle(g,"display","block")}var l=i.callback;var m=i.scope;var f=g;if(k){var h=new YAHOO.util.Anim(g,{opacity:{to:j?(YAHOO.env.ua.webkit>0?0.99:1):0}},0.5);h.onComplete.subscribe(function(n){if(!j&&e){YUIDom.setStyle(f,"display","none")}if(l){l.call(m?m:this)}});h.animate()}else{if(!j&&e){YUIDom.setStyle(f,"display","none")}if(l){l.call(m?m:this)}}},pulseAttributes:{callback:null,inColor:"#ffff80",inDuration:0.2,outDuration:1.2,clearOnComplete:true},pulse:function c(h,l){if(!YAHOO.util.ColorAnim){return}var i=YUIDom.get(h);if(i){var f=YAHOO.lang.merge(this.pulseAttributes,{outColor:YUIDom.getStyle(i,"backgroundColor")});if(typeof l=="object"){f=YAHOO.lang.merge(f,l)}var g=new YAHOO.util.ColorAnim(i,{backgroundColor:{to:f.inColor}},f.inDuration);var j=new YAHOO.util.ColorAnim(i,{backgroundColor:{to:f.outColor}},f.outDuration);g.onComplete.subscribe(function k(){j.animate()});j.onComplete.subscribe(function e(){if(f.clearOnComplete){YUIDom.setStyle(i,"backgroundColor","")}if(f.callback&&(typeof f.callback.fn=="function")){f.callback.fn.call(f.callback.scope||this,f.callback.obj)}});g.animate()}}})}();(function(){Alfresco.util.NodeRef=function(b){try{var c=b.replace(":/",""),a=c.split("/");return({nodeRef:b,storeType:a[0],storeId:a[1],id:a[2],uri:c,toString:function(){return b}})}catch(d){throw"Invalid nodeRef: "+b}}})();(function(){Alfresco.util.Deferred=function(h,a){var e=false;var f=a;var d={};if(YAHOO.lang.isArray(h)){d=Alfresco.util.arrayToObject(h,false)}else{YAHOO.lang.augmentObject(d,h,true)}var i=function c(){for(var j in d){if(d.hasOwnProperty(j)){if(d[j]!==true){return}}}if(YAHOO.lang.isFunction(f.fn)){e=true;f.fn.call(f.scope||window,f.obj)}};return({fulfil:function g(j){if(!e&&d.hasOwnProperty(j)){d[j]=true;i();return true}return false},expire:function b(){e=true}})}})();if(typeof log4javascript!="undefined"){Alfresco.logger=log4javascript.getDefaultLogger();if(Alfresco.constants.AUTOLOGGING||Alfresco.util.getQueryStringParameter("log")=="on"){Alfresco.logger.info("Alfresco LOGGING enabled.")}else{if(Alfresco.util.getVar("logging",false)){Alfresco.logger.info("Alfresco LOGGING re-enabled.")}else{log4javascript.setEnabled(false)}}Alfresco.logger.getEffectiveAppenders()[0].addEventListener("unload",function(){log4javascript.setEnabled(false);Alfresco.util.setVar("logging",false)});if(window.addEventListener){var sequence=[],logSequence=[17,17,16,16],logSequenceLen=logSequence.length,logSequenceStr=logSequence.toString();document.addEventListener("keydown",function(a){sequence.push(a.keyCode);while(sequence.length>logSequenceLen){sequence.shift()}if(sequence.toString().indexOf(logSequenceStr)>=0){sequence=[];if(log4javascript.isEnabled()){log4javascript.setEnabled(false);Alfresco.logger.getEffectiveAppenders()[0].hide();Alfresco.util.setVar("logging",false)}else{log4javascript.setEnabled(true);Alfresco.logger.getEffectiveAppenders()[0].show();Alfresco.util.setVar("logging",true)}}},true)}}else{Alfresco.logger={trace:function(){},debug:function(){},info:function(){},warn:function(){},error:function(){},fatal:function(){},isDebugEnabled:function(){return false}}}Alfresco.thirdparty.dateFormat=function(){var a=function(){var b=/d{1,4}|m{1,4}|yy(?:yy)?|([HhMsTt])\1?|[LloZ]|"[^"]*"|'[^']*'/g,c=/\b(?:[PMCEA][SDP]T|(?:Pacific|Mountain|Central|Eastern|Atlantic) (?:Standard|Daylight|Prevailing) Time|(?:GMT|UTC)(?:[-+]\d{4})?)\b/g,e=/[^-+\dA-Z]/g,d=function(g,f){g=String(g);f=parseInt(f,10)||2;while(g.length<f){g="0"+g}return g};return function(i,t){if(arguments.length==1&&(typeof i=="string"||i instanceof String)&&!/\d/.test(i)){t=i;i=undefined}if(typeof i=="string"){i=i.replace(".","")}i=i?new Date(i):new Date();if(isNaN(i)){throw"invalid date"}t=String(this.masks[t]||t||this.masks["default"]);var l=i.getDate(),f=i.getDay(),j=i.getMonth(),p=i.getFullYear(),q=i.getHours(),k=i.getMinutes(),r=i.getSeconds(),n=i.getMilliseconds(),g=i.getTimezoneOffset(),h={d:l,dd:d(l),ddd:this.i18n.dayNames[f],dddd:this.i18n.dayNames[f+7],m:j+1,mm:d(j+1),mmm:this.i18n.monthNames[j],mmmm:this.i18n.monthNames[j+12],yy:String(p).slice(2),yyyy:p,h:q%12||12,hh:d(q%12||12),H:q,HH:d(q),M:k,MM:d(k),s:r,ss:d(r),l:d(n,3),L:d(n>99?Math.round(n/10):n),t:q<12?this.TIME_AM.charAt(0):this.TIME_PM.charAt(0),tt:q<12?this.TIME_AM:this.TIME_PM,T:q<12?this.TIME_AM.charAt(0).toUpperCase():this.TIME_PM.charAt(0).toUpperCase(),TT:q<12?this.TIME_AM.toUpperCase():this.TIME_PM.toUpperCase(),Z:(String(i).match(c)||[""]).pop().replace(e,""),o:(g>0?"-":"+")+d(Math.floor(Math.abs(g)/60)*100+Math.abs(g)%60,4)};return t.replace(b,function(m){return(m in h)?h[m]:m.slice(1,m.length-1)})}}();return a.apply(arguments.callee,arguments)};Alfresco.thirdparty.dateFormat.DAY_NAMES=(Alfresco.util.message("days.medium")+","+Alfresco.util.message("days.long")).split(",");Alfresco.thirdparty.dateFormat.MONTH_NAMES=(Alfresco.util.message("months.short")+","+Alfresco.util.message("months.long")).split(",");Alfresco.thirdparty.dateFormat.TIME_AM=Alfresco.util.message("date-format.am");Alfresco.thirdparty.dateFormat.TIME_PM=Alfresco.util.message("date-format.pm");Alfresco.thirdparty.dateFormat.masks={"default":Alfresco.util.message("date-format.default"),defaultDateOnly:Alfresco.util.message("date-format.defaultDateOnly"),shortDate:Alfresco.util.message("date-format.shortDate"),mediumDate:Alfresco.util.message("date-format.mediumDate"),longDate:Alfresco.util.message("date-format.longDate"),fullDate:Alfresco.util.message("date-format.fullDate"),shortTime:Alfresco.util.message("date-format.shortTime"),mediumTime:Alfresco.util.message("date-format.mediumTime"),longTime:Alfresco.util.message("date-format.longTime"),isoDate:"yyyy-mm-dd",isoTime:"HH:MM:ss",isoDateTime:"yyyy-mm-dd'T'HH:MM:ss",isoFullDateTime:"yyyy-mm-dd'T'HH:MM:ss.lo"};Alfresco.thirdparty.dateFormat.i18n={dayNames:Alfresco.thirdparty.dateFormat.DAY_NAMES,monthNames:Alfresco.thirdparty.dateFormat.MONTH_NAMES};Alfresco.thirdparty.fromISO8601=function(){var a=function(){var b=/^(?:(\d{4})(?:-(\d{2})(?:-(\d{2}))?)?)?(?:T(\d{2}):(\d{2})(?::(\d{2})(.\d+)?)?((?:[+-](\d{2}):(\d{2}))|Z)?)?$/;return function(f){var d=b.exec(f);var c=null;if(d){d.shift();if(d[1]){d[1]--}if(d[6]){d[6]*=1000}c=new Date(d[0]||1970,d[1]||0,d[2]||1,d[3]||0,d[4]||0,d[5]||0,d[6]||0);var g=0;var e=d[7]&&d[7].charAt(0);if(e!="Z"){g=((d[8]||0)*60)+(Number(d[9])||0);if(e!="-"){g*=-1}}if(e){g-=c.getTimezoneOffset()}if(g){c.setTime(c.getTime()+g*60000)}}return c}}();return a.apply(arguments.callee,arguments)};Alfresco.thirdparty.toISO8601=function(){var a=function(){var b=function(c){return(c<10)?"0"+c:c};return function(h,l){l=l||{};var g=[];var j=l.zulu?"getUTC":"get";var e="";if(l.selector!="time"){var i=h[j+"FullYear"]();e=["0000".substr((i+"").length)+i,b(h[j+"Month"]()+1),b(h[j+"Date"]())].join("-")}g.push(e);if(l.selector!="date"){var d=[b(h[j+"Hours"]()),b(h[j+"Minutes"]()),b(h[j+"Seconds"]())].join(":");var c=h[j+"Milliseconds"]();if(l.milliseconds===undefined||l.milliseconds){d+="."+(c<100?"0":"")+b(c)}if(l.zulu){d+="Z"}else{if(l.selector!="time"){var k=h.getTimezoneOffset();var f=Math.abs(k);d+=(k>0?"-":"+")+b(Math.floor(f/60))+":"+b(f%60)}}g.push(d)}return g.join("T")}}();return a.apply(arguments.callee,arguments)};Alfresco.service.BaseService=function BaseService_constructor(){return this};Alfresco.service.BaseService.prototype={_jsonCall:function BaseService__jsonCall(d,c,a,b){b=b||{};Alfresco.util.Ajax.jsonRequest({method:d,url:c,dataObj:a,successCallback:b.successCallback,successMessage:b.successMessage,failureCallback:b.failureCallback,failureMessage:b.failureMessage,noReloadOnAuthFailure:b.noReloadOnAuthFailure||false})}};(function(){Alfresco.service.Preferences=function f(){Alfresco.service.Preferences.superclass.constructor.call(this);return this};YAHOO.extend(Alfresco.service.Preferences,Alfresco.service.BaseService,{_url:function c(){return Alfresco.constants.PROXY_URI+"api/people/"+Alfresco.constants.USERNAME+"/preferences"},request:function d(h,g){this._jsonCall(Alfresco.util.Ajax.GET,this._url()+(h?"?pf="+h:""),null,g)},set:function b(h,j,g){var i=Alfresco.util.dotNotationToObject(h,j);this._jsonCall(Alfresco.util.Ajax.POST,this._url(),i,g)},add:function e(i,l,h){var m=i,g=l;var k=h?h:{};var j=k.successCallback;k.successCallback={fn:function(p,r){k.successCallback=j;var o=Alfresco.util.dotNotationToObject(m,null);o=YAHOO.lang.merge(o,p.json);var n=Alfresco.util.findValueByDotNotation(o,m);if(typeof n=="string"||n===null){var q=n?n.split(","):[];q.push(g);this.set(i,q.join(","),k)}},scope:this};this.request(i,k)},remove:function a(i,l,h){var m=i,g=l;var k=h?h:{};var j=k.successCallback;k.successCallback={fn:function(p,r){k.successCallback=j;var o=Alfresco.util.dotNotationToObject(m,null);o=YAHOO.lang.merge(o,p.json);var n=Alfresco.util.findValueByDotNotation(o,m);if(typeof n=="string"){var q=n?n.split(","):[];q=Alfresco.util.arrayRemove(q,g);this.set(i,q.join(","),k)}},scope:this};this.request(i,k)}})})();Alfresco.util.RichEditorManager=(function(){var a=[];return({addEditor:function(c,b){a[c]=b},getEditor:function(b){if(a[b]){return a[b]}return null}})})();Alfresco.util.RichEditor=function(g,a,c){var k=Alfresco.util.RichEditorManager.getEditor(g);if(k){var h=new k();YAHOO.lang.augmentObject(h,{unsubscribe:function(){},subscribe:function(l,j,i){var m=h.getEditor();if(m.subscribe){m.subscribe(l,j,i,true)}else{if(m[l]){m[l].add(function(){j.apply(i,arguments)})}}YAHOO.Bubbling.on(l,j,i)},on:function(l,j,i){YAHOO.Bubbling.on(l,j,i)}});if(a&&c){if(c.language){var e=Alfresco.util.message("tinymce_languages").split(","),b="en";for(var f=0,d=e.length;f<d;f++){if(e[f]==c.language){b=c.language;break}}c.language=b}h.init(a,c)}return h}return null};Alfresco.util.RENDERLOOPSIZE=25;(function(){Alfresco.component.Base=function(e,g,f){this.name=(typeof e=="undefined"||e===null)?"Alfresco.component.Base":e;this.id=(typeof g=="undefined"||g===null)?Alfresco.util.generateDomId():g;this.options=Alfresco.util.deepCopy(this.options);this.widgets={};this.modules={};this.services={};Alfresco.util.ComponentManager.register(this);if(YAHOO.lang.isArray(f)){Alfresco.util.YUILoaderHelper.require(f,this.onComponentsLoaded,this)}else{this.onComponentsLoaded()}return this};Alfresco.component.Base.prototype={options:{},widgets:null,modules:null,services:null,setOptions:function d(e){this.options=YAHOO.lang.merge(this.options,e);return this},setMessages:function c(e){Alfresco.util.addMessages(e,this.name);return this},onComponentsLoaded:function a(){if(this.onReady&&this.onReady.call&&this.id!=="null"){YUIEvent.onContentReady(this.id,this.onReady,this,true)}},msg:function b(e){return Alfresco.util.message.call(this,e,this.name,Array.prototype.slice.call(arguments).slice(1))}}})();(function(){Alfresco.component.BaseFilter=function(f,h,g){Alfresco.component.BaseFilter.superclass.constructor.apply(this,arguments);this.filterName=this.name.substring(this.name.lastIndexOf(".")+1);this.controlsDeactivated=false;this.uniqueEventKey=Alfresco.util.generateDomId(null,"filter");YAHOO.Bubbling.on("filterChanged",this.onFilterChanged,this);YAHOO.Bubbling.on("deactivateAllControls",this.onDeactivateAllControls,this);return this};YAHOO.extend(Alfresco.component.BaseFilter,Alfresco.component.Base,{filterName:null,selectedFilter:null,controlsDeactivated:null,uniqueEventKey:null,setFilterIds:function c(f){Alfresco.util.FilterManager.register(this.name,f)},onReady:function b(){var k=this,l=YUISelector.query("h2",this.id);if(YAHOO.lang.isArray(l)){Alfresco.util.createTwister(l[0],this.filterName)}var h=YUISelector.query("li a",this.id);for(var f=0,g=h.length;f<g;f++){YUIDom.addClass(h[f],this.uniqueEventKey)}YAHOO.Bubbling.addDefaultAction(this.uniqueEventKey,function j(q,p){var o=p[1].anchor,i=YAHOO.Bubbling.getOwnerByTagName(o,"span");if((i!==null)&&!k.controlsDeactivated){var n=o.getAttribute("href",2);if(YAHOO.env.ua.ie>0&&YAHOO.env.ua.ie<8){var s=n.length-1;if(s<0||n.lastIndexOf("#")!=s){return false}}else{if(o.getAttribute("href",2).length>1){return false}}var m=i.className,r=o.rel;YAHOO.Bubbling.fire("changeFilter",{filterOwner:k.name,filterId:m,filterData:r});if(typeof k[m]=="function"){k[m].call(k)}p[1].stop=true}return true})},onFilterChanged:function e(h,f){var l=Alfresco.util.cleanBubblingObject(f[1]),m=false;if((l!==null)&&(l.filterId!==null)){l.filterOwner=l.filterOwner||Alfresco.util.FilterManager.getOwner(l.filterId);if(l.filterOwner==this.name){if(this.selectedFilter!==null){YUIDom.removeClass(this.selectedFilter,"selected")}var k=YUISelector.query("."+l.filterId,this.id);if(k.length==1){this.selectedFilter=k[0].parentNode;YUIDom.addClass(this.selectedFilter,"selected");m=true}else{if(k.length>1){if(l.filterData.indexOf("]")!==-1||l.filterData.indexOf(",")!==-1){for(var g=0,j=k.length;g<j;g++){if(k[g].firstChild.rel==l.filterData){this.selectedFilter=k[g].parentNode;YUIDom.addClass(this.selectedFilter,"selected");m=true}}}else{k=YUISelector.query("a[rel='"+l.filterData.replace("'","'")+"']",this.id);if(k.length==1){this.selectedFilter=k[0].parentNode.parentNode;YUIDom.addClass(this.selectedFilter,"selected");m=true}}}}if(!m){this.handleFilterIdNotFound(l)}}else{if(this.selectedFilter!==null){YUIDom.removeClass(this.selectedFilter,"selected")}}}},handleFilterIdNotFound:function a(f){},onDeactivateAllControls:function d(h,f){this.controlsDeactivated=true;var k=YUISelector.query("a."+this.uniqueEventKey,this.id);for(var g=0,j=k.length;g<j;g++){YUIDom.addClass(k[g],"disabled")}}})})();