<alfresco-config>

   <!-- ************************************** -->
   <!-- Workflow Definition Form Configuration -->
   <!-- ************************************** -->
   
   <!--
      When workflows are started some bpm:workflowXxx properties are copied to the task and named bpm:xxx
      I.e The bpm:workflowDueDate workflow property becomes the bpm:dueDate task property. 
   -->

   <!-- Ad Hoc Workflow Definition -->
   <config evaluator="string-compare" condition="jbpm$wf:adhoc">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:workflowDescription" />
               <show id="bpm:workflowPriority" />
               <show id="bpm:workflowDueDate" />
               <show id="bpm:assignee" />
               <show id="packageItems" />
               <show id="wf:notifyMe" />               
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.general" />
               <set id="assignee" appearance="title" label-id="workflow.group.assignee" />
               <set id="other" appearance="title" label-id="workflow.group.other" />
               
               <field id="bpm:assignee" label-id="workflow.field.assign_to" set="assignee" />
               <field id="wf:notifyMe" set="other" />
               <field id="bpm:workflowDescription" label-id="workflow.field.message">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="bpm:workflowPriority">
                  <control>
                     <control-param name="options">1|High,2|Medium,3|Low</control-param>
                  </control>
               </field>
               <field id="packageItems" label-id="workflow.field.items" set="assignee">
                  <control>
                     <control-param name="displayMode">list</control-param>
                     <control-param name="selectedItemsContextProperty">selectedItems</control-param>
                  </control>
               </field>
            </appearance>
         </form>
      </forms>
   </config>
   
   <!-- Review and Approve Workflow Definition -->
   <config evaluator="string-compare" condition="jbpm$wf:review">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:workflowDescription" />
               <show id="bpm:workflowPriority" />
               <show id="bpm:workflowDueDate" />
               <show id="bpm:assignee" />
               <show id="packageItems" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.general" />
               <set id="assignee" appearance="title" label-id="workflow.group.assignee" />
               
               <field id="bpm:assignee" label-id="workflow.field.reviewer" set="assignee" />
               <field id="bpm:workflowDescription" label-id="workflow.field.message">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="bpm:workflowPriority">
                  <control>
                     <control-param name="options">1|High,2|Medium,3|Low</control-param>
                  </control>
               </field>
               <field id="packageItems" label-id="workflow.field.items">
                  <control>
                     <control-param name="displayMode">list</control-param>
                     <control-param name="selectedItemsContextProperty">selectedItems</control-param>
                  </control>
               </field>
            </appearance>
         </form>
      </forms>
   </config>

   <!-- Pooled Review and Approve Workflow Definition -->
   <config evaluator="string-compare" condition="jbpm$wf:reviewpooled">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:workflowDescription" />
               <show id="bpm:workflowPriority" />
               <show id="bpm:workflowDueDate" />
               <show id="wf:requiredApprovePercent" />
               <show id="bpm:groupAssignee" />
               <show id="packageItems" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.general" />
               <set id="assignee" appearance="title" label-id="workflow.group.assignee" />
               
               <field id="bpm:groupAssignee" label-id="workflow.field.reviewer" set="assignee" />
               <field id="bpm:workflowDescription" label-id="workflow.field.message">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="bpm:workflowPriority">
                  <control>
                     <control-param name="options">1|High,2|Medium,3|Low</control-param>
                  </control>
               </field>
               <field id="packageItems" label-id="workflow.field.items">
                  <control>
                     <control-param name="displayMode">list</control-param>
                     <control-param name="selectedItemsContextProperty">selectedItems</control-param>
                  </control>
               </field>
            </appearance>
         </form>
      </forms>
   </config>
   
   <!-- *********************** -->
   <!-- Task Form Configuration -->
   <!-- *********************** -->
   
   <config evaluator="task-type" condition="wf:adhocTask">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:taskId" />
               <show id="bpm:description" />
               <show id="bpm:dueDate" />
               <show id="bpm:priority" />
               <show id="bpm:status" />
               <show id="packageItems" />
               <show id="bpm:comment" />
               <show id="transitions" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.task.info" />
               <set id="progress" appearance="title" label-id="workflow.group.task.progress" />
               <set id="response" appearance="title" label-id="workflow.group.response" />
               
               <field id="bpm:description" read-only="true" />
               <field id="bpm:dueDate" read-only="true" />
               <field id="bpm:priority" read-only="true" />
               <field id="bpm:status" set="progress" />
               <field id="packageItems" label-id="workflow.field.items" set="progress">
                  <control>
                     <control-param name="displayMode">list</control-param>
                  </control>
               </field>
               <field id="bpm:comment" label-id="workflow.field.comment" set="response">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="transitions" set="response" />
            </appearance>
         </form>
      </forms>
   </config>
   
   <config evaluator="task-type" condition="wf:completedAdhocTask">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:taskId" />
               <show id="bpm:description" />
               <show id="bpm:dueDate" />
               <show id="bpm:priority" />
               <show id="packageItems" />
               <show id="bpm:comment" />
               <show id="transitions" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.task.info" />
               <set id="response" appearance="title" label-id="workflow.group.response" />
               
               <field id="bpm:description" read-only="true" />
               <field id="bpm:dueDate" read-only="true" />
               <field id="bpm:priority" read-only="true" />
               <field id="packageItems" label-id="workflow.field.items">
                  <control>
                     <control-param name="displayMode">list</control-param>
                  </control>
               </field>
               <field id="bpm:comment" label-id="workflow.field.comment" set="response">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="transitions" set="response" />
            </appearance>
         </form>
      </forms>
   </config>
   
   <config evaluator="task-type" condition="wf:reviewTask">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:taskId" />
               <show id="bpm:description" />
               <show id="bpm:dueDate" />
               <show id="bpm:priority" />
               <show id="bpm:status" />
               <show id="packageItems" />
               <show id="bpm:comment" />
               <show id="transitions" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.task.info" />
               <set id="progress" appearance="title" label-id="workflow.group.task.progress" />
               <set id="response" appearance="title" label-id="workflow.group.response" />
               
               <field id="bpm:description" read-only="true" />
               <field id="bpm:dueDate" read-only="true" />
               <field id="bpm:priority" read-only="true" />
               <field id="bpm:status" set="progress" />
               <field id="packageItems" label-id="workflow.field.items" set="progress">
                  <control>
                     <control-param name="displayMode">list</control-param>
                  </control>
               </field>
               <field id="bpm:comment" label-id="workflow.field.comment" set="response">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="transitions" set="response" />
            </appearance>
         </form>
      </forms>
   </config>
   
   <config evaluator="task-type" condition="wf:approvedTask">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:taskId" />
               <show id="bpm:description" />
               <show id="bpm:dueDate" />
               <show id="bpm:priority" />
               <show id="packageItems" />
               <show id="bpm:comment" />
               <show id="transitions" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.task.info" />
               <set id="response" appearance="title" label-id="workflow.group.response" />
               
               <field id="bpm:description" read-only="true" />
               <field id="bpm:dueDate" read-only="true" />
               <field id="bpm:priority" read-only="true" />
               <field id="packageItems" label-id="workflow.field.items">
                  <control>
                     <control-param name="displayMode">list</control-param>
                  </control>
               </field>
               <field id="bpm:comment" label-id="workflow.field.comment" set="response">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="transitions" set="response" />
            </appearance>
         </form>
      </forms>
   </config>
   
   <config evaluator="task-type" condition="wf:rejectedTask">
      <forms>
         <form>
            <field-visibility>
               <show id="bpm:taskId" />
               <show id="bpm:description" />
               <show id="bpm:dueDate" />
               <show id="bpm:priority" />
               <show id="packageItems" />
               <show id="bpm:comment" />
               <show id="transitions" />
            </field-visibility>
            <appearance>
               <set id="" appearance="title" label-id="workflow.group.task.info" />
               <set id="response" appearance="title" label-id="workflow.group.response" />
               
               <field id="bpm:description" read-only="true" />
               <field id="bpm:dueDate" read-only="true" />
               <field id="bpm:priority" read-only="true" />
               <field id="packageItems" label-id="workflow.field.items">
                  <control>
                     <control-param name="displayMode">list</control-param>
                  </control>
               </field>
               <field id="bpm:comment" label-id="workflow.field.comment" set="response">
                  <control template="/org/alfresco/components/form/controls/textarea.ftl" />
               </field>
               <field id="transitions" set="response" />
            </appearance>
         </form>
      </forms>
   </config>

</alfresco-config>
